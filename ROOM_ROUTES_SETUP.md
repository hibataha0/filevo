# ๐ง ุฅุนุฏุงุฏ Routes ูููุดุงุฑูุฉ ููุฑุฉ ูุงุญุฏุฉ

## โ ุงููููุงุช ุงููููุดุฃุฉ

### 1. `api/roomRoutes.js`

ูุญุชูู ุนูู Routes ุงูุฌุฏูุฏุฉ:

- `POST /api/rooms/:id/share-file-onetime` - ููุดุงุฑูุฉ ููู ูุน ุฑูู (ูุดุงูุฏุฉ ูุฑุฉ ูุงุญุฏุฉ)
- `GET /api/rooms/:id/files/:fileId/view` - ููุดุงูุฏุฉ/ุชุญููู ููู ูู ุงูุฑูู

### 2. `services/roomService.js`

ูุญุชูู ุนูู ุงูุฏูุงู:

- `shareFileWithRoomOneTime` - ูุดุงุฑูุฉ ููู ูุน ุฑูู (ูุดุงูุฏุฉ ูุฑุฉ ูุงุญุฏุฉ)
- `viewRoomFile` - ูุดุงูุฏุฉ/ุชุญููู ููู ูู ุงูุฑูู
- `getRoomDetails` - ุงูุญุตูู ุนูู ุชูุงุตูู ุงูุฑูู (ูุญุณูู)

---

## ๐ ููููุฉ ุฅุถุงูุฉ Routes ูู Backend

**โ๏ธ ููู ุฌุฏุงู:** ูุฌุจ ุฅุถุงูุฉ ุงูู routes ุงูุฌุฏูุฏุฉ ุฅูู ููู routes ุงูุฑุฆูุณู ูู ุงูุจุงู ุฅูุฏ.

### ุงูุฎุทูุงุช:

1. **ุงูุชุญ ููู routes ุงูุฑุฆูุณู** (ูุซู `routes/roomRoutes.js` ุฃู `server.js` ุฃู `app.js`)

2. **ุฃุถู ุงูู route ุงูุฌุฏูุฏ:**

```javascript
const roomRoutes = require("../api/roomRoutes"); // ุฃู ุงููุณุงุฑ ุงูุตุญูุญ

// โ ุฅุถุงูุฉ routes ูููุดุงุฑูุฉ ููุฑุฉ ูุงุญุฏุฉ
app.use("/api", roomRoutes); // ุฃู router.use('/api', roomRoutes);
```

**ุฃู ุฅุฐุง ูุงู ูุฏูู ููู routes ูููุตู ููู rooms:**

```javascript
const roomRoutes = require("../api/roomRoutes");
const { protect } = require("../middleware/authMiddleware");

// โ ุฅุถุงูุฉ routes ูููุดุงุฑูุฉ ููุฑุฉ ูุงุญุฏุฉ
router.use("/", roomRoutes);
```

### ูุซุงู ูุงูู:

```javascript
// ูู ููู server.js ุฃู app.js
const express = require("express");
const app = express();

// ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช ...

// โ ุฅุถุงูุฉ routes
const roomRoutes = require("./api/roomRoutes");
app.use("/api", roomRoutes);

// ุฃู ุฅุฐุง ูุงู ูุฏูู routes ุฃุฎุฑู ููู rooms:
const existingRoomRoutes = require("./routes/roomRoutes");
app.use("/api", existingRoomRoutes);

// โ ุฅุถุงูุฉ routes ุงูุฌุฏูุฏุฉ
app.use("/api", roomRoutes);
```

---

## ๐ ุงูุชุญูู ูู ุงููุดุงูู

### ุงููุดููุฉ: "ูุง ูููู ุชุญุฏูุฏ ูููุฉ ุงููุณุชุฎุฏู. ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู"

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**

1. **ุงูู route ุบูุฑ ูุณุฌู ูู ููู routes ุงูุฑุฆูุณู**

   - โ ุชุฃูุฏ ูู ุฅุถุงูุฉ `app.use('/api', roomRoutes);` ูู ููู routes ุงูุฑุฆูุณู

2. **ุงูู middleware `protect` ุบูุฑ ููุฌูุฏ ุฃู ูุง ูุนูู**

   - โ ุชุฃูุฏ ูู ูุฌูุฏ ููู `middleware/authMiddleware.js`
   - โ ุชุฃูุฏ ูู ุฃู `protect` middleware ูุถูู `req.user` ุจุดูู ุตุญูุญ

3. **ุงูู token ุบูุฑ ูุฑุณู ูู ุงูู frontend**

   - โ ุชุฃูุฏ ูู ุฅุฑุณุงู `Authorization: Bearer <token>` ูู ุงูู headers

4. **ุงููุณุงุฑ ุบูุฑ ุตุญูุญ**
   - โ ุชุฃูุฏ ูู ุฃู ุงููุณุงุฑ ูู ุงูู frontend ูุทุงุจู ุงููุณุงุฑ ูู ุงูุจุงู ุฅูุฏ
   - โ ุงููุณุงุฑ ุงููุงูู: `/api/v1/rooms/:id/share-file-onetime`

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุชุฑุชูุจ Routes:** ุชุฃูุฏ ูู ุฃู ุงูู routes ุงูุฌุฏูุฏุฉ ุชุฃุชู ูุจู ุฃู routes ุฏููุงููููุฉ ุฃุฎุฑู
2. **Middleware:** ุฌููุน ุงูู routes ูุญููุฉ ุจู `protect` middleware
3. **ุงููุณุงุฑุงุช:** ุชุฃูุฏ ูู ุฃู ุงููุณุงุฑุงุช ุงููุณุจูุฉ ุตุญูุญุฉ ุญุณุจ ุจููุฉ ูุดุฑูุนู

---

## โ ุงูุชุญูู ูู ุฃู ูู ุดูุก ูุนูู

ุจุนุฏ ุฅุถุงูุฉ ุงูู routes:

1. ุฃุนุฏ ุชุดุบูู ุงูุจุงู ุฅูุฏ
2. ุฌุฑุจ ูุดุงุฑูุฉ ููู ูู ุงูู frontend
3. ุชุญูู ูู ุงูู console ูู ุงูุจุงู ุฅูุฏ ูุฑุคูุฉ ุงูู logs
4. ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ "User not authenticated"ุ ุชุญูู ูู:
   - ุงูู route ูุณุฌู ุจุดูู ุตุญูุญ
   - ุงูู middleware `protect` ูุนูู
   - ุงูู token ูุฑุณู ุจุดูู ุตุญูุญ




