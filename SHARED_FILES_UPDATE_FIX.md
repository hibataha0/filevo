# ๐ ุฅุตูุงุญ ุชุญุฏูุซ ุงููููุงุช ุงููุดุชุฑูุฉ

## โ ุงููุดููุฉ

ุนูุฏ ุชุญุฏูุซ ุตูุฑุฉ ูุดุชุฑูุฉุ ูุงู ูุชู ุฅูุดุงุก ููู ุฌุฏูุฏ ุจุฏูุงู ูู ุงุณุชุจุฏุงู ุงูููู ุงููุฏููุ ููุง ูุนูู ุฃู ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุง ูุฑูู ุงูุชุญุฏูุซุงุช.

## ๐ง ุงูุญู

ุชู ุชุนุฏูู ุฏุงูุฉ `updateFileContent` ูู `backend_file_controller_updateFileContent.js` ูุถูุงู ุฃู ุงููููุงุช ุงููุดุชุฑูุฉ (ุฎุงุตุฉ ุงูุตูุฑ) ูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู ุนูุฏ ุงูุชุญุฏูุซ.

---

## ๐ ุงูุชุนุฏููุงุช

### ูุจู ุงูุชุนุฏูู:

```javascript
const isTextFile = /* ... */;

const replaceMode = isTextFile
  ? true
  : req.body.replaceMode === "true" || req.body.replaceMode === true;
```

**ุงููุชูุฌุฉ:**
- โ ุงููููุงุช ุงููุตูุฉ: ุงุณุชุจุฏุงู ุชููุงุฆู
- โ ุงูุตูุฑ ุงููุดุชุฑูุฉ: ูุฏ ูุง ูุชู ุงุณุชุจุฏุงููุง โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุง ูุฑูู ุงูุชุญุฏูุซุงุช

### ุจุนุฏ ุงูุชุนุฏูู:

```javascript
const isTextFile = /* ... */;

// โ ุฅุฐุง ูุงู ุงูููู ูุดุงุฑูุงูุ ุงุณุชุฎุฏู replace mode ุชููุงุฆูุงู ุญุชู ููุตูุฑ
const isShared =
  file.isShared === true || (file.sharedWith && file.sharedWith.length > 0);

const replaceMode =
  isTextFile || isShared
    ? true
    : req.body.replaceMode === "true" || req.body.replaceMode === true;
```

**ุงููุชูุฌุฉ:**
- โ ุงููููุงุช ุงููุตูุฉ: ุงุณุชุจุฏุงู ุชููุงุฆู
- โ ุงูุตูุฑ ุงููุดุชุฑูุฉ: ุงุณุชุจุฏุงู ุชููุงุฆู โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช
- โ ุงูุตูุฑ ุบูุฑ ุงููุดุชุฑูุฉ: ุญุณุจ `replaceMode` ูู body

---

## ๐ฏ ุงูููุทู ุงูุฌุฏูุฏ

### ูุชู ูุชู ุงุณุชุฎุฏุงู Replace Mode ุชููุงุฆูุงูุ

1. **ุงููููุงุช ุงููุตูุฉ**: ุฏุงุฆูุงู
   - `.txt`, `.md`, `.json`, `.xml`, `.csv`
   - `category === "Documents"`
   - `type.startsWith("text/")`

2. **ุงููููุงุช ุงููุดุชุฑูุฉ**: ุฏุงุฆูุงู (ุญุชู ููุตูุฑ)
   - `file.isShared === true`
   - `file.sharedWith.length > 0`

3. **ุงููููุงุช ุงูุฃุฎุฑู**: ุญุณุจ `replaceMode` ูู body
   - `replaceMode = true`: ุงุณุชุจุฏุงู
   - `replaceMode = false` ุฃู ุบูุฑ ููุฌูุฏ: ูุณุฎุฉ ุฌุฏูุฏุฉ

---

## ๐ ุฃูุซูุฉ

### ูุซุงู 1: ุตูุฑุฉ ูุดุชุฑูุฉ

```javascript
// ุงูููู: ุตูุฑุฉ ูุดุงุฑูุฉ ูุน ูุณุชุฎุฏููู ุขุฎุฑูู
file.isShared = true;
file.sharedWith = [{ userId: "user123" }, { userId: "user456" }];

// ุงููุชูุฌุฉ: replaceMode = true ุชููุงุฆูุงู
// โ ูุชู ุงุณุชุจุฏุงู ุงูุตูุฑุฉ ุจููุณ ุงูุงุณู ูุงููุณุงุฑ
// โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู
```

### ูุซุงู 2: ุตูุฑุฉ ุบูุฑ ูุดุชุฑูุฉ

```javascript
// ุงูููู: ุตูุฑุฉ ุบูุฑ ูุดุชุฑูุฉ
file.isShared = false;
file.sharedWith = [];

// ุงููุชูุฌุฉ: replaceMode ุญุณุจ req.body.replaceMode
// ุฅุฐุง replaceMode = true โ ุงุณุชุจุฏุงู
// ุฅุฐุง replaceMode = false โ ูุณุฎุฉ ุฌุฏูุฏุฉ
```

### ูุซุงู 3: ููู ูุตู ูุดุชุฑู

```javascript
// ุงูููู: ููู ูุตู ูุดุชุฑู
file.category = "Documents";
file.isShared = true;

// ุงููุชูุฌุฉ: replaceMode = true ุชููุงุฆูุงู (ูุตู + ูุดุชุฑู)
// โ ูุชู ุงุณุชุจุฏุงู ุงูููู ุจููุณ ุงูุงุณู ูุงููุณุงุฑ
```

---

## ๐ Integration

### ุงูุฎุทูุฉ 1: ูุณุฎ ุงูููุฏ ุฅูู Backend

ุงูุณุฎ ุฏุงูุฉ `updateFileContent` ูู `backend_file_controller_updateFileContent.js` ุฅูู ููู `fileController.js` ูู ุงูุจุงู ุฅูุฏ.

### ุงูุฎุทูุฉ 2: ุงูุชุฃูุฏ ูู ูุฌูุฏ Route

ูู ููู `routes/fileRoutes.js`:

```javascript
router.put('/files/:id/content', protect, uploadSingle, fileController.updateFileContent);
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุงูุญููู ูู Model

ุชุฃูุฏ ูู ุฃู `fileModel` ูุญุชูู ุนูู ุงูุญููู ุงูุชุงููุฉ:
- `isShared` (Boolean)
- `sharedWith` (Array)

---

## โ ุงูููุงุฆุฏ

1. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู**: ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู
2. **ุงุชุณุงู**: ููุณ ุงูุณููู ูููููุงุช ุงููุตูุฉ ูุงูุตูุฑ ุงููุดุชุฑูุฉ
3. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุง ุญุงุฌุฉ ูุชุญุฏูุฏ `replaceMode` ูููููุงุช ุงููุดุชุฑูุฉ
4. **ุงูุฃูุงู**: ุงูุญูุงุธ ุนูู ููุณ ุงูุงุณู ูุงููุณุงุฑ ูููููุงุช ุงููุดุชุฑูุฉ

---

## ๐ ููุงุญุธุงุช

1. **ุงููููุงุช ุงููุดุชุฑูุฉ**: ูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู ุญุชู ูู ูุงูุช ุตูุฑุงู
2. **ุงููููุงุช ุบูุฑ ุงููุดุชุฑูุฉ**: ูููู ุงุฎุชูุงุฑ ูุถุน ุงูุงุณุชุจุฏุงู ุฃู ุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ
3. **ุงููููุงุช ุงููุตูุฉ**: ุฏุงุฆูุงู ูุชู ุงุณุชุจุฏุงููุง (ุณูุงุก ูุงูุช ูุดุชุฑูุฉ ุฃู ูุง)

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

- ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ูููุณุชุฎุฏููู ุงููุดุงุฑููู ุนูุฏ ุชุญุฏูุซ ุงูููู
- ุฅุถุงูุฉ ุณุฌู ููุชุญุฏูุซุงุช ูู ุงููููุงุช ุงููุดุชุฑูุฉ
- ุฅุถุงูุฉ ุฎูุงุฑ ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุชุญุฏูุซ





